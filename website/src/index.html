<html>

	<div id="tg-link"></div>
	<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js" integrity="sha256-nWBTbvxhJgjslRyuAKJHK+XcZPlCnmIAAMixz6EefVk=" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>
		window.addEventListener('load', async () => {
			if (window.ethereum) {
				window.web3 = new Web3(ethereum)

				try {
					await ethereum.enable()

					const accounts = await web3.eth.getAccounts()

					web3.eth.sign(web3.utils.sha3('hello friend'), accounts[0], function (err, res) {
						$.ajax({
							url: `http://localhost:8080/signed`,
							type: 'get',
							data: { 'userId': 'mukodj', 'signed': res },
							success: function(result) {
								alert('Success lolz')
							}
						})
					})
				} catch (error) {
					console.log(error)
				}
			}
			
			else {
				alert('Non-Ethereum browser detected. You should consider trying MetaMask!')
			}
		})
	</script>
</html>
